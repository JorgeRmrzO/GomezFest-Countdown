<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Temporizador de Cuenta Regresiva</title>
    <meta property="og:title" content="Temporizador de Cuenta Regresiva">
    <meta property="og:description" content="¡Mira este temporizador de cuenta regresiva!">
    <meta property="og:type" content="website">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Audio de fondo -->
    <audio id="backgroundMusic" loop preload="auto">
        <source src="audio/cumbia_ruana.mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>

    <!-- Overlay sutil para activar audio -->
    <div id="audioOverlay" class="audio-overlay">
        <div class="audio-overlay-content">
            <div class="cumbia-icon">🎵</div>
            <p>Toca para activar la cumbia</p>
        </div>
    </div>

    <!-- Botón para controlar el audio -->
    <button id="audioToggle" class="audio-control" style="display: none;">
        <span id="audioIcon">🔊</span>
    </button>

    <!-- Botón para controlar el audio -->
    <button id="audioToggle" class="audio-control" style="display: none;">
        <span id="audioIcon">🔊</span>
    </button>
    <div class="container">

        <h1>🎯 GomezFest - Cuenta Regresiva</h1>

        <div class="hero-section">
            <img
                src="img/inv2.jpeg"
                alt="Invitación vertical GomezFest"
                class="hero-image"
                style="max-width: 260px; aspect-ratio: 3/5; object-position: center 60%;"
                loading="lazy"
            >
            <div class="emoji-icons">🪩🎉🕺</div>
            <h2 class="main-title">¡Estás invitad@ al cumbión del año!</h2>
            <p class="description">Ya se armó la fiesta y tú eres parte del desmadre:</p>
            <ul class="features-list">
                <li>🎤 <b>Sonidero</b> para que te avientes los mejores pasos prohibidos</li>
                <li>🧊 <b>Coolers</b> bien fríos, pa' que no falte el flow</li>
                <li>🪇 <b>Cumbiones</b> toda la noche, ¡puro ritmo sabrosón!</li>
                <li>🍻 <b>Ambiente chido</b> y pura gozadera asegurada</li>
            </ul>
            <div class="cta-box">
                <b class="cta-text">¡No te lo pierdas!</b> Apunta la fecha, comparte el link con tu bandita y prepárate para el bailongo. <span class="cta-emojis">🕺💃🥳</span>
            </div>
        </div>

            <div class="countdown-wrapper">
                    <iframe src="https://w2.countingdownto.com/6548324" frameborder="0"></iframe>
            </div>

            <div class="bottom-emojis">
                <span style="color:#00ff87;">🎈</span><span style="color:#00bfff;">🪩</span><span style="color:#ff9100;">🎶</span><span style="color:#00bfff;">💃</span><span style="color:#00ff87;">🕺</span><span style="color:#ff9100;">🍻</span>
            </div>

        <div class="share-section">
                <div class="share-text">Comparte esta cuenta regresiva con tus amigos:</div>
                <div class="share-buttons">
                        <a href="#" class="share-btn whatsapp" onclick="shareWhatsApp()">
                                📱 WhatsApp
                        </a>
                        <a href="#" class="share-btn facebook" onclick="shareFacebook()">
                                📘 Facebook
                        </a>
                        <a href="#" class="share-btn twitter" onclick="shareTwitter()">
                                🐦 Twitter
                        </a>
                        <a href="#" class="share-btn copy-link" onclick="copyLink()">
                                🔗 Copiar Enlace
                        </a>
                </div>
        </div>
    </div>
    
    <div class="copy-notification" id="copyNotification">
        ¡Enlace copiado al portapapeles!
    </div>
    
    <script>
        const currentUrl = window.location.href;
        const backgroundMusic = document.getElementById('backgroundMusic');
        const audioToggle = document.getElementById('audioToggle');
        const audioIcon = document.getElementById('audioIcon');
        const audioOverlay = document.getElementById('audioOverlay');

        // Configurar volumen inicial para fade-in suave
        backgroundMusic.volume = 0;
        let targetVolume = 0.5;
        let isPlaying = false;

        // Función para fade in del audio
        function fadeInAudio() {
            if (backgroundMusic.volume < targetVolume) {
                backgroundMusic.volume = Math.min(backgroundMusic.volume + 0.05, targetVolume);
                requestAnimationFrame(fadeInAudio);
            }
        }

        // Función para fade out del audio
        function fadeOutAudio() {
            if (backgroundMusic.volume > 0) {
                backgroundMusic.volume = Math.max(backgroundMusic.volume - 0.05, 0);
                requestAnimationFrame(fadeOutAudio);
            } else {
                backgroundMusic.pause();
            }
        }

        // Activar audio con cualquier interacción
        function activateAudio() {
            if (!isPlaying) {
                backgroundMusic.play().then(() => {
                    fadeInAudio();
                    audioOverlay.style.opacity = '0';
                    setTimeout(() => {
                        audioOverlay.style.display = 'none';
                        audioToggle.style.display = 'flex';
                    }, 300);
                    isPlaying = true;
                }).catch(() => {
                    // Silenciosamente manejar errores
                    console.log('Audio no pudo reproducirse automáticamente');
                });
            }
        }

        // Eventos para activar audio
        audioOverlay.addEventListener('click', activateAudio);
        document.addEventListener('click', activateAudio, { once: true });
        document.addEventListener('keydown', activateAudio, { once: true });
        document.addEventListener('touchstart', activateAudio, { once: true });

        // Control manual del audio
        audioToggle.addEventListener('click', function(e) {
            e.stopPropagation();
            if (backgroundMusic.paused) {
                backgroundMusic.play().then(() => {
                    fadeInAudio();
                    audioIcon.textContent = '🔊';
                    isPlaying = true;
                }).catch(e => console.log('Error:', e));
            } else {
                fadeOutAudio();
                audioIcon.textContent = '🔇';
                isPlaying = false;
            }
        });

        // Intentar auto-reproducir inmediatamente
        document.addEventListener('DOMContentLoaded', function() {
            backgroundMusic.load();
            
            // Intentar reproducir sin interacción (funcionará en algunos casos)
            const playPromise = backgroundMusic.play();
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    fadeInAudio();
                    audioOverlay.style.display = 'none';
                    audioToggle.style.display = 'flex';
                    isPlaying = true;
                }).catch(() => {
                    // Si falla, mostrar overlay sutil
                    audioOverlay.style.display = 'flex';
                });
            }
        });

        // Configurar volumen inicial
        backgroundMusic.volume = 0.5;

        // Control manual del audio
        audioToggle.addEventListener('click', function() {
            if (backgroundMusic.paused) {
                backgroundMusic.play().then(() => {
                    audioIcon.textContent = '🔊';
                }).catch(e => console.log('Error al reproducir audio:', e));
            } else {
                backgroundMusic.pause();
                audioIcon.textContent = '🔇';
            }
        });

        // Intentar auto-reproducir (funcionará solo en algunos casos)
        document.addEventListener('DOMContentLoaded', function() {
            // Precargar el audio en segundo plano
            backgroundMusic.load();
            
            backgroundMusic.play().then(() => {
                audioOverlay.style.display = 'none';
                audioToggle.style.display = 'flex';
            }).catch(() => {
                // Si falla, mostrar el overlay
                audioOverlay.style.display = 'flex';
            });
        });
        
        function shareWhatsApp() {
            const text = "¡Mira este temporizador de cuenta regresiva!";
            const url = `https://wa.me/?text=${encodeURIComponent(text + " " + currentUrl)}`;
            window.open(url, '_blank');
        }
        
        function shareFacebook() {
            const url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(currentUrl)}`;
            window.open(url, '_blank');
        }
        
        function shareTwitter() {
            const text = "¡Mira este temporizador de cuenta regresiva!";
            const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(currentUrl)}`;
            window.open(url, '_blank');
        }
        
        function copyLink() {
            navigator.clipboard.writeText(currentUrl).then(function() {
                const notification = document.getElementById('copyNotification');
                notification.classList.add('show');
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }).catch(function(err) {
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = currentUrl;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                
                const notification = document.getElementById('copyNotification');
                notification.classList.add('show');
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            });
        }
    </script>
</body>
</html>